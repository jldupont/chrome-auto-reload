<html>
	<head>
		<script type="text/javascript" src="oo.js"></script>
		<script type="text/javascript" src="tabparams.js"></script>
		<script type="text/javascript" src="fsm.js"></script>
	</head>

	<body>
		<script>
			var t=new TabParams();
			t.setByTidUrl(1, "url1", "key1", "value1");
			var value1=t.getByTidUrl(1, "url1", "key1");
			if (value1!="value1")
				console.error("key1 error!");
				
			var f=new FSM("test");
			// off -> on --> sticky --> off
			if (f.nextState() !="on")
				console.error("expected 'on' state");
			if (f.nextState() !="sticky")
				console.error("expected 'sticky' state");
			if (f.nextState() !="off")
				console.error("expected 'off' state");
			
			// off (stop) --> on(stop) --> stopped(stop) --> on
			var s;
			if ((s=f.nextState(true)) !="on")
				console.error("expected 'on' state, got:"+s);
			if ((s=f.nextState(true)) !="stopped")
				console.error("expected 'stopped' state, got:"+s);
			if ((s=f.nextState(true)) !="on")
				console.error("expected 'on' state, got:"+s);

			f.setUrl("test");
			
			
		</script>
	</body>

</html>